!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=React},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2);t.Plural=a.Plural,t.generator=a.generator;var o=n(6);t.T=o.default,t.makeT=o.makeT},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=/\s/g,o=/\W/g;t.generator={plain:function(e){return e},hyphens:function(e){return e.toLowerCase().trim().replace(a,"-").replace(o,"-")}};t.Plural=function(e,t){var n=t.zero,a=t.one,o=t.other;return"{"+e+", plural,\n"+(n?"\t=0{"+n+"}\n":"")+(a?"\tone{"+a+"}\n":"")+"\tother{"+o+"}}"}},function(e,t){e.exports=ReactRouterDOM},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(5),r=n(1),s=n(3);class c extends a.Component{componentWillMount(){document.body.classList.add("panel"),document.body.classList.remove("door")}render(){return a.createElement("div",null,a.createElement("header",{id:"panel-header"},a.createElement("img",{src:"/images/icons/onepassword-128.png",width:"48",alt:"1Password"})),a.createElement("div",{id:"panel"},this.props.children))}}class i extends a.Component{constructor(e){super(e)}componentWillMount(){document.body.classList.remove("panel"),document.body.classList.add("door")}render(){return a.createElement("div",null,a.createElement("section",{id:"signin"},a.createElement("div",{id:"top-door"},a.createElement("div",{id:"lock"},a.createElement("div",{id:"keyhole-center"}),a.createElement("div",{id:"keyhole"}),a.createElement("div",{id:"keyhole-highlight"})),a.createElement("div",{className:"lock-color"}),a.createElement("div",{className:"lock-color light"})),a.createElement("div",{id:"bottom-door"},a.createElement("div",{id:"content"},this.props.children))),a.createElement("div",null,a.createElement("footer",{className:"center"},a.createElement("a",{href:"https://1password.com"},a.createElement("img",{src:"/images/popup/locked-signup.svg",alt:"1Password"})),a.createElement("p",{className:"small supplemental"},"1Password X (Chrome) ",a.createElement("span",{id:"version"},Object(r.T)("version {version}",{version:this.props.version}))),a.createElement("p",{className:"small supplemental"},"© 2017 AgileBits, Inc. All rights reserved. 317 Adelaide Street West, Toronto, Ontario, M5V1P9, Canada."))))}}class l extends a.Component{constructor(e){super(e)}handleSignIn(){window.location.href="https://start.1password.com/signin/?auth-only=1"}render(){return a.createElement("div",null,a.createElement("h1",{className:"title"},r.T.$("Welcome to 1Password <xLogo />",{xLogo:a.createElement("span",null,"X")})),a.createElement("p",{className:"platform_indicator"},a.createElement("img",{src:"/images/chrome_icon.svg"})," Chrome"),a.createElement("div",{id:"account"},a.createElement("p",{className:"supplemental"},Object(r.T)("If you have a 1Password account, sign in to get started.",null,"sign-in.desc")),a.createElement("button",{id:"signInButton",onClick:this.handleSignIn},Object(r.T)("Sign In")),a.createElement("p",{className:"supplemental"},Object(r.T)("Don't have an account yet?"),a.createElement("br",null),a.createElement("a",{href:"https://start.1password.com/signup/"},Object(r.T)("Create your 1Password account")))))}}class u extends a.Component{render(){return a.createElement("div",null,a.createElement("section",null,a.createElement("header",null,a.createElement("img",{id:"party-time",src:"/images/app/party.svg"}),a.createElement("h1",null,Object(r.T)("1Password is ready to go!")),a.createElement("h2",null,r.T.$("Click the 1Password button <button /> in the toolbar to unlock 1Password, then visit your favorite sites to start saving and filling passwords.",{button:a.createElement("img",{id:"1password-button",src:"/images/toolbar-button.svg"})}))),a.createElement("p",null,a.createElement("a",{href:"https://support.1password.com/getting-started-1password-x"},Object(r.T)("Read the Getting Started guide.")))))}}class d extends a.Component{render(){return this.props.signedIn?a.createElement(c,null,a.createElement(u,null)):a.createElement(i,{version:this.props.version},a.createElement(l,null))}}var m=n(10),p=this&&this.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(n[a[o]]=e[a[o]])}return n};function h(){}class g extends a.Component{constructor(e){super(e),this.toggle=(e=>{const t=!this.state.checked;this.setChecked(t),this.props.onClick(e)}),this.handleKeyDown=(e=>{37===e.keyCode?this.setChecked(!1):39===e.keyCode?this.setChecked(!0):32!==e.keyCode&&13!==e.keyCode||this.toggle(e)}),this.handleMouseUp=(e=>{this.spanElement&&this.spanElement.blur(),this.props.onMouseUp&&this.props.onMouseUp(e)});let t=!1;t="checked"in e?!!e.checked:!!e.defaultChecked,this.state={checked:t}}componentWillReceiveProps(e){"checked"in e&&this.setState({checked:!!e.checked})}setChecked(e){this.props.disabled||("checked"in this.props||this.setState({checked:e}),this.props.onChange(e))}render(){const e=this.props,{className:t,prefixCls:n,disabled:o,checkedChildren:r,tabIndex:s,unCheckedChildren:c}=e,i=p(e,["className","prefixCls","disabled","checkedChildren","tabIndex","unCheckedChildren"]),l=this.state.checked,u=o?-1:s||0,d=function e(t){for(var n={}.hasOwnProperty,a=[],o=0;o<arguments.length;o++){var r=arguments[o];if(r){var s=typeof r;if("string"===s||"number"===s)a.push(r);else if(Array.isArray(r))a.push(e.apply(null,r));else if("object"===s)for(var c in r)n.call(r,c)&&r[c]&&a.push(c)}}return a.join(" ")}({[t]:!!t,[n]:!0,[`${n}-checked`]:l,[`${n}-disabled`]:o});return a.createElement("span",Object.assign({},i,{className:d,tabIndex:u,ref:e=>this.spanElement=e,onKeyDown:this.handleKeyDown,onClick:this.toggle,onMouseUp:this.handleMouseUp}),a.createElement("span",{className:`${n}-inner`},l?r:c))}}g.defaultProps={checked:!1,prefixCls:"rc-switch",checkedChildren:null,unCheckedChildren:null,className:"",defaultChecked:!1,onChange:h,onClick:h};var f=g;const v="B",E="F";var b;(k=b||(b={}))[k.None=0]="None",k[k.Fill=1]="Fill",k[k.GoNFill=2]="GoNFill";var k;const y=(...e)=>{if(0===e.length)return"";if(1===e.length)return e[0];let t=e.shift();for(let n of e)0!==n.length&&("/"===t.slice(-1)&&"/"===n.charAt(0)?t+=n.slice(1):"/"===t.slice(-1)||"/"===n.charAt(0)?t+=n:t=t+"/"+n);return t};function O(e){return e.avatar?w(e,e.avatar):e.type===v?"/images/avatar-business-default.png":e.type===E?"/images/avatar-family-default.png":"/images/avatar-individual-default.png"}function w(e,t){let n=e.baseAvatarURL;return"/"===t[0]?y(n,t):y(n,e.uuid,t)}const C=(e,t)=>t>0&&e>0?a.createElement("p",null,a.createElement("strong",null,Object(r.T)("Locked accounts:")," "),Object(r.T)("Some of your accounts have a different Master Password. To unlock them, unlock 1Password with their password.",null,"locked-accounts.desc")):null;function S(e){const{accounts:t,lockedAccounts:n,openHomePage:o,onAccountSignOut:r}=e;return a.createElement("div",null,a.createElement("ul",{className:"account-list"},t.map(e=>a.createElement(A,{account:e,avatarUrl:O(e),locked:!1,openHomePage:o,onAccountSignOut:r})),n.map(e=>a.createElement(A,{account:e,avatarUrl:O(e),locked:!0,openHomePage:o,onAccountSignOut:r})),e.children),n&&C(t.length,n.length))}function A(e){const{account:t,avatarUrl:n,openHomePage:o,onAccountSignOut:s,locked:c}=e,i=(e,t)=>{o(e),t.preventDefault()};return a.createElement("li",{className:"row",key:t.uuid},a.createElement("div",null,a.createElement("a",{href:"#",onClick:i.bind(this,t)},a.createElement("img",{className:"rectangle avatar",src:n})),a.createElement("a",{href:"#",onClick:i.bind(this,t)},t.name),c&&a.createElement("span",null,"  (locked)")),e.children,a.createElement("button",{onClick:s.bind(this,t)},Object(r.T)("Remove")))}function P(e){const{url:t}=e;return a.createElement("li",{className:"row",key:"add"},a.createElement("div",null,a.createElement("a",{href:t},a.createElement("div",{id:"add-account",className:"rectangle avatar"})),a.createElement("a",{href:t},Object(r.T)("Add an account"))),e.children)}const N=1,j=300,x="config",I={autoLockMinutes:10,autoSaveEnabled:!0,autoSaveExceptions:[],ignoreAccounts:[],inlineEnabled:!0,inlineShowAutomatically:!0};function M(e){let t={};for(let n in e)switch(n){case"autoLockMinutes":let a=Math.max(0,Math.min(parseInt(e[n],10),j));t.autoLockMinutes=a;break;case"autoSaveEnabled":t.autoSaveEnabled=e[n];break;case"autoSaveExceptions":t.autoSaveExceptions=e[n];break;case"ignoreAccounts":t.ignoreAccounts=e[n];break;case"inlineEnabled":t.inlineEnabled=e[n];break;case"inlineShowAutomatically":t.inlineShowAutomatically=e[n]}return t}class L extends a.Component{constructor(e){super(e),this.handleKeyboardShortcutClick=(e=>{e.preventDefault(),chrome.tabs.create({url:"chrome://extensions/configureCommands"})}),this.handleAutoLockChange=(e=>{let t=e.target.value;/[0-9]/.test(t)&&this.setState({autoLockInputValue:t})}),this.handleAutoSaveChange=(e=>{this.props.updateConfig({autoSaveEnabled:!this.props.autoSaveEnabled})}),this.handleInlineEnabledChange=(e=>{this.props.updateConfig({inlineEnabled:!this.props.inlineEnabled})}),this.handleInlineActiveChange=(e=>{this.props.updateConfig({inlineShowAutomatically:!this.props.inlineShowAutomatically})}),this.updateAutoLockMinutes=(()=>{let e=parseInt(this.state.autoLockInputValue,10);e=Math.max(N,Math.min(e,j)),this.setState({autoLockInputValue:e.toString()}),this.props.updateConfig({autoLockMinutes:e})}),this.updateSaveExceptions=(e=>{this.props.updateConfig({autoSaveExceptions:e})}),this.createAutoLockElement=(()=>{const e=this.state.autoLockInputValue;return a.createElement("div",{className:"rectangle autolock"},a.createElement("label",null,a.createElement("input",{type:"number",value:e,max:j,min:N,onChange:this.handleAutoLockChange,onBlur:this.updateAutoLockMinutes}),Object(r.T)(Object(r.Plural)("numMinutes",{other:"minutes",one:"minute",zero:"minutes"}),{numMinutes:e},"auto-lock.minutes")))}),this.state={autoLockInputValue:""+this.props.autoLockMinutes}}render(){const{accounts:e,lockedAccounts:t,version:n}=this.props;return this.props,e?e.length+t.length===0?a.createElement(m.Redirect,{to:"/page/welcome"}):a.createElement("div",{className:"settings"},a.createElement("div",{id:"left"},a.createElement("div",{className:"rectangle card"},a.createElement("img",{src:"/images/app/app_icon.svg",width:"72",height:"72"}),a.createElement("h1",{className:"title"},"1Password ",a.createElement("span",null,"X")),a.createElement("div",{className:"platform_indicator"},a.createElement("img",{src:"/images/chrome_icon.svg"})," Chrome"),a.createElement("p",null,Object(r.T)("version {version}",{version:n}),a.createElement("br",null),a.createElement("a",{href:"https://discussions.agilebits.com/categories/1password-x"},Object(r.T)("release notes"))))),a.createElement("div",{id:"right"},a.createElement("h2",null,Object(r.T)("Accounts")),a.createElement("div",null,a.createElement(S,{accounts:e,lockedAccounts:t,openHomePage:this.props.onAccountOpenHomePage,onAccountSignOut:this.props.onAccountSignOut},a.createElement(P,{url:"https://start.1password.com/signin/?auth-only=1"}))),a.createElement("div",null,a.createElement("h2",null,Object(r.T)("Settings")),a.createElement("ul",{className:"settings"},a.createElement("li",{className:"row"},a.createElement("h3",null,Object(r.T)("Lock 1Password after system is idle for",null,"auto-lock.title")),this.createAutoLockElement()),a.createElement("li",{className:"row"},a.createElement("h3",null,Object(r.T)("Show 1Password icon in forms")),a.createElement(f,{checked:this.props.inlineEnabled,onChange:this.handleInlineEnabledChange})),a.createElement("li",{className:"row"},a.createElement("h3",null,Object(r.T)("Always show logins when a field is focused")),a.createElement(f,{disabled:!this.props.inlineEnabled,checked:this.props.inlineShowAutomatically,onChange:this.handleInlineActiveChange})),a.createElement("li",{className:"row multi-row"},a.createElement("div",null,a.createElement("h3",null,Object(r.T)("Open 1Password with keyboard shortcut",null,"keyboard-shortcut.title")),a.createElement("div",{className:"keyboard-shortcut"},this.props.keyboardShortcut)),a.createElement("div",null,a.createElement("p",{className:"supplemental"},a.createElement("a",{href:"#",onClick:this.handleKeyboardShortcutClick},Object(r.T)("Change on the Extensions page.",null,"ext-page.link"))))))))):a.createElement("p",null,"Loading...")}}class T extends a.Component{constructor(e){super(e),this.hasAccounts=(()=>this.props.accounts.length>0),this.updateConfig=(e=>{let t=Object.assign({},this.state.config,e);this.setState({config:t}),this.props.updateFromConfig(t)}),this.onAccountSignOut=(e=>{this.props.signOut(e)}),this.onAccountOpenHomePage=(e=>{this.props.openHomePage(e)}),this.state={config:e.initialConfig,keyboardShortcut:""}}componentWillMount(){chrome.commands.getAll(e=>{this.setState({keyboardShortcut:e[0].shortcut})})}render(){return a.createElement(s.Switch,null,a.createElement(s.Route,{path:"/page/welcome",render:e=>a.createElement(d,Object.assign({},e,{signedIn:this.hasAccounts(),version:this.props.version}))}),a.createElement(s.Route,{path:"/page/ready",render:e=>a.createElement(d,Object.assign({},e,{signedIn:!0,version:this.props.version}))}),a.createElement(s.Route,{path:"/page/settings",render:e=>a.createElement(L,Object.assign({},e,{onAccountOpenHomePage:this.onAccountOpenHomePage,onAccountSignOut:this.onAccountSignOut,version:this.props.version,accounts:this.props.accounts,lockedAccounts:this.props.lockedAccounts,autoLockMinutes:this.state.config.autoLockMinutes,autoSaveEnabled:this.state.config.autoSaveEnabled,autoSaveExceptions:this.state.config.autoSaveExceptions,inlineEnabled:this.state.config.inlineEnabled,inlineShowAutomatically:this.state.config.inlineShowAutomatically,updateConfig:this.updateConfig,keyboardShortcut:this.state.keyboardShortcut}))}))}}n(11);function _(){return new Promise((e,t)=>{chrome.runtime.getBackgroundPage(t=>{e(t.bg)})})}function F(){return function(){let e={};try{e=JSON.parse(localStorage.getItem(x))}catch(e){}return Object.assign({},I,M(e))}()}async function R(e){let t=await _();t.onepassword.accountIsUnlocked(e.uuid)?t.onepassword.openHomePage(e):chrome.tabs.create({url:e.signinAddress})}async function H(){let e=await _();r.T.setup(e.onepassword.loadI18nConfig()),o.render(a.createElement(s.HashRouter,null,a.createElement(T,{initialConfig:F(),accounts:e.onepassword.signedInAccounts(),lockedAccounts:e.onepassword.lockedAccounts(),updateFromConfig:e.onepassword.updateFromConfig,version:e.version,openHomePage:R,signOut:function(e,t){e.onepassword.signOut(t),H()}.bind(this,e)})),document.getElementById("root"))}window.addEventListener("load",H)},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";var a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),r=n(2),s=n(8),c=n(9);t.defaultLanguage="en";var i=function(){function e(t){void 0===t&&(t=null),this.setup(a({},e.defaultSetup,t)),this.dateFormatter=o.default(Intl.DateTimeFormat),this.numberFormatter=o.default(Intl.NumberFormat)}return e.prototype.format=function(e,t,n,a){void 0===a&&(a=this.locale);var r="date"===e?o.dateTimeFormatOptions:o.numberFormatOptions;return("date"===e?this.dateFormatter:this.numberFormatter).call(this,a,r[n]||r.default).format(t)},e.prototype.getKey=function(e,n){void 0===n&&(n=this.locale);var a=this.messages[n],o=this.messages[t.defaultLanguage];return a&&a[e]?a[e]:o&&o[e]?o[e]:void 0},e.prototype.generateId=function(e){return this.idGenerator(e)},e.prototype.lookup=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var a=this.getKey(e,this.locale)||n||e;return"string"==typeof a?s.default(a,t):a(t)},e.prototype.setup=function(e){void 0===e&&(e={});var t=e.locale,n=e.idGenerator,a=e.messages;e.compiler;return n&&(this.idGenerator=n),t&&(this.locale=t),a&&(this.messages=a),{messages:this.messages,locale:this.locale,idGenerator:this.idGenerator}},e.defaultSetup={messages:{},locale:t.defaultLanguage,idGenerator:r.generator.hyphens},e}();t.I18n=i;function l(){return function(e){var t=function(t,n,a){return a||(a=e.generateId(t)),e.lookup(a,n,t)};return t._i18nInstance=e,t.setup=e.setup.bind(t._i18nInstance),t.lookup=e.lookup.bind(t._i18nInstance),t.date=e.format.bind(t._i18nInstance,"date"),t.number=e.format.bind(t._i18nInstance,"number"),t.$=function(e,n,a){var o=t.apply(this,arguments);return c.default(o,n)},t}(new i)}t.i18nNamespace=l,t.default=l(),t.makeT=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateTimeFormatOptions={short:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},dateTime:{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}},t.dateTimeFormatOptions.default=t.dateTimeFormatOptions.long,t.numberFormatOptions={currency:{style:"currency",currency:"USD"},decimal:{style:"decimal"},percent:{style:"percent"}},t.numberFormatOptions.default=t.numberFormatOptions.decimal;t.default=function(e){var t={};return function(n,a){var o=Array.prototype.slice.call(arguments),r=n+"-"+JSON.stringify(a);if(r in t)return t[r];var s=new((c=Function.prototype.bind).call.apply(c,[e,null].concat(o)));return t[r]=s,s;var c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={OPEN:"{",CLOSE:"}"};t.default=function(e,t){if(!t)return e;for(var n="",o=[],r=0;r<e.length;r++)switch(e.charAt(r)){case a.OPEN:o.push(n),n="";break;case a.CLOSE:o.push(t[n]),n="";break;default:n+=e.charAt(r)}return o.push(n),o.join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a;t.default=function(e,t){void 0===a&&(a=new DOMParser);var n=a.parseFromString("<span>"+e+"</span>","text/xml");if("parseerror"===n.firstChild.nodeName)throw new Error("Could not parse XML string");return Array.prototype.slice.call(n.firstChild.childNodes).map(function(e){return function e(t,n){var a=t.childNodes;if(!a||0===a.length)return n[t.nodeName]||t.nodeValue;var o=Array.prototype.slice.call(a).map(function(t){return e(t,n)});return function(e,t,n){var a=n[e],o=a[0],r=a[1];return o.apply(void 0,[r].concat(t))}(t.nodeName,o,n)}(e,t)})}},function(e,t){e.exports=ReactRouter},function(e,t){}]);