/*! MySQL JavaScript Driver 2.0.0 Copyright (c) 2014 Yoichiro Tanaka. Apache License Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0) */
!function(){"use strict";var a={};"undefined"==typeof module?window.MySQL=a:module.exports=a}(),function(){"use strict";var a=function(){this.errorCodeMap={"-1":"IO_PENDING","-2":"FAILED","-3":"ABORTED","-4":"INVALID_ARGUMENT","-5":"INVALID_HANDLE","-6":"FILE_NOT_FOUND","-7":"TIMED_OUT","-8":"FILE_TOO_BIG","-9":"UNEXPECTED","-10":"ACCESS_DENIED","-11":"NOT_IMPLEMENTED","-12":"INSUFFICIENT_RESOURCES","-13":"OUT_OF_MEMORY","-14":"UPLOAD_FILE_CHANGED","-15":"SOCKET_NOT_CONNECTED","-16":"FILE_EXISTS","-17":"FILE_PATH_TOO_LONG","-18":"FILE_NO_SPACE","-19":"FILE_VIRUS_INFECTED","-20":"BLOCKED_BY_CLIENT","-21":"NETWORK_CHANGED","-22":"BLOCKED_BY_ADMINISTRATOR","-23":"SOCKET_IS_CONNECTED","-100":"CONNECTION_CLOSED","-101":"CONNECTION_RESET","-102":"CONNECTION_REFUSED","-103":"CONNECTION_ABORTED","-104":"CONNECTION_FAILED","-105":"NAME_NOT_RESOLVED","-106":"INTERNET_DISCONNECTED","-107":"SSL_PROTOCOL_ERROR","-108":"ADDRESS_INVALID","-109":"ADDRESS_UNREACHABLE","-110":"SSL_CLIENT_AUTH_CERT_NEEDED","-111":"TUNNEL_CONNECTION_FAILED","-112":"NO_SSL_VERSIONS_ENABLED","-113":"SSL_VERSION_OR_CIPHER_MISMATCH","-114":"SSL_RENEGOTIATION_REQUESTED","-115":"PROXY_AUTH_UNSUPPORTED","-116":"CERT_ERROR_IN_SSL_RENEGOTIATION","-117":"BAD_SSL_CLIENT_AUTH_CERT","-118":"CONNECTION_TIMED_OUT","-119":"HOST_RESOLVER_QUEUE_TOO_LARGE","-120":"SOCKS_CONNECTION_FAILED","-121":"SOCKS_CONNECTION_HOST_UNREACHABLE","-122":"NPN_NEGOTIATION_FAILED","-123":"SSL_NO_RENEGOTIATION","-124":"WINSOCK_UNEXPECTED_WRITTEN_BYTES","-125":"SSL_DECOMPRESSION_FAILURE_ALERT","-126":"SSL_BAD_RECORD_MAC_ALERT","-127":"PROXY_AUTH_REQUESTED","-128":"SSL_UNSAFE_NEGOTIATION","-129":"SSL_WEAK_SERVER_EPHEMERAL_DH_KEY","-130":"PROXY_CONNECTION_FAILED","-131":"MANDATORY_PROXY_CONFIGURATION_FAILED","-133":"PRECONNECT_MAX_SOCKET_LIMIT","-134":"SSL_CLIENT_AUTH_PRIVATE_KEY_ACCESS_DENIED","-135":"SSL_CLIENT_AUTH_CERT_NO_PRIVATE_KEY","-136":"PROXY_CERTIFICATE_INVALID","-137":"NAME_RESOLUTION_FAILED","-138":"NETWORK_ACCESS_DENIED","-139":"TEMPORARILY_THROTTLED","-140":"HTTPS_PROXY_TUNNEL_RESPONSE","-141":"SSL_CLIENT_AUTH_SIGNATURE_FAILED","-142":"MSG_TOO_BIG","-143":"SPDY_SESSION_ALREADY_EXISTS","-145":"WS_PROTOCOL_ERROR","-146":"PROTOCOL_SWITCHED","-147":"ADDRESS_IN_USE","-148":"SSL_HANDSHAKE_NOT_COMPLETED","-149":"SSL_BAD_PEER_PUBLIC_KEY","-150":"SSL_PINNED_KEY_NOT_IN_CERT_CHAIN","-151":"CLIENT_AUTH_CERT_TYPE_UNSUPPORTED","-152":"ORIGIN_BOUND_CERT_GENERATION_TYPE_MISMATCH","-153":"SSL_DECRYPT_ERROR_ALERT","-154":"WS_THROTTLE_QUEUE_TOO_LARGE","-155":"TOO_MANY_SOCKET_STREAMS","-156":"SSL_SERVER_CERT_CHANGED","-157":"SSL_INAPPROPRIATE_FALLBACK","-158":"CT_NO_SCTS_VERIFIED_OK","-159":"SSL_UNRECOGNIZED_NAME_ALERT","-200":"CERT_COMMON_NAME_INVALID","-201":"CERT_DATE_INVALID","-202":"CERT_AUTHORITY_INVALID","-203":"CERT_CONTAINS_ERRORS","-204":"CERT_NO_REVOCATION_MECHANISM","-205":"CERT_UNABLE_TO_CHECK_REVOCATION","-206":"CERT_REVOKED","-207":"CERT_INVALID","-208":"CERT_WEAK_SIGNATURE_ALGORITHM","-210":"CERT_NON_UNIQUE_NAME","-211":"CERT_WEAK_KEY","-212":"CERT_NAME_CONSTRAINT_VIOLATION","-213":"CERT_END","-300":"INVALID_URL","-301":"DISALLOWED_URL_SCHEME","-302":"UNKNOWN_URL_SCHEME","-310":"TOO_MANY_REDIRECTS","-311":"UNSAFE_REDIRECT","-312":"UNSAFE_PORT","-320":"INVALID_RESPONSE","-321":"INVALID_CHUNKED_ENCODING","-322":"METHOD_NOT_SUPPORTED","-323":"UNEXPECTED_PROXY_AUTH","-324":"EMPTY_RESPONSE","-325":"RESPONSE_HEADERS_TOO_BIG","-326":"PAC_STATUS_NOT_OK","-327":"PAC_SCRIPT_FAILED","-328":"REQUEST_RANGE_NOT_SATISFIABLE","-329":"MALFORMED_IDENTITY","-330":"CONTENT_DECODING_FAILED","-331":"NETWORK_IO_SUSPENDED","-332":"SYN_REPLY_NOT_RECEIVED","-333":"ENCODING_CONVERSION_FAILED","-334":"UNRECOGNIZED_FTP_DIRECTORY_LISTING_FORMAT","-335":"INVALID_SPDY_STREAM","-336":"NO_SUPPORTED_PROXIES","-337":"SPDY_PROTOCOL_ERROR","-338":"INVALID_AUTH_CREDENTIALS","-339":"UNSUPPORTED_AUTH_SCHEME","-340":"ENCODING_DETECTION_FAILED","-341":"MISSING_AUTH_CREDENTIALS","-342":"UNEXPECTED_SECURITY_LIBRARY_STATUS","-343":"MISCONFIGURED_AUTH_ENVIRONMENT","-344":"UNDOCUMENTED_SECURITY_LIBRARY_STATUS","-345":"RESPONSE_BODY_TOO_BIG_TO_DRAIN","-346":"RESPONSE_HEADERS_MULTIPLE_CONTENT_LENGTH","-347":"INCOMPLETE_SPDY_HEADERS","-348":"PAC_NOT_IN_DHCP","-349":"RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION","-350":"RESPONSE_HEADERS_MULTIPLE_LOCATION","-351":"SPDY_SERVER_REFUSED_STREAM","-352":"SPDY_PING_FAILED","-353":"PIPELINE_EVICTION","-354":"CONTENT_LENGTH_MISMATCH","-355":"INCOMPLETE_CHUNKED_ENCODING","-356":"QUIC_PROTOCOL_ERROR","-357":"RESPONSE_HEADERS_TRUNCATED","-358":"QUIC_HANDSHAKE_FAILED","-400":"CACHE_MISS","-401":"CACHE_READ_FAILURE","-402":"CACHE_WRITE_FAILURE","-403":"CACHE_OPERATION_NOT_SUPPORTED","-404":"CACHE_OPEN_FAILURE","-405":"CACHE_CREATE_FAILURE","-406":"CACHE_RACE","-407":"CACHE_CHECKSUM_READ_FAILURE","-408":"CACHE_CHECKSUM_MISMATCH","-501":"INSECURE_RESPONSE","-502":"NO_PRIVATE_KEY_FOR_CERT","-503":"ADD_USER_CERT_FAILED","-601":"FTP_FAILED","-602":"FTP_SERVICE_UNAVAILABLE","-603":"FTP_TRANSFER_ABORTED","-604":"FTP_FILE_BUSY","-605":"FTP_SYNTAX_ERROR","-606":"FTP_COMMAND_NOT_SUPPORTED","-607":"FTP_BAD_COMMAND_SEQUENCE","-701":"PKCS12_IMPORT_BAD_PASSWORD","-702":"PKCS12_IMPORT_FAILED","-703":"IMPORT_CA_CERT_NOT_CA","-704":"IMPORT_CERT_ALREADY_EXISTS","-705":"IMPORT_CA_CERT_FAILED","-706":"IMPORT_SERVER_CERT_FAILED","-707":"PKCS12_IMPORT_INVALID_MAC","-708":"PKCS12_IMPORT_INVALID_FILE","-709":"PKCS12_IMPORT_UNSUPPORTED","-710":"KEY_GENERATION_FAILED","-711":"ORIGIN_BOUND_CERT_GENERATION_FAILED","-712":"PRIVATE_KEY_EXPORT_FAILED","-713":"SELF_SIGNED_CERT_GENERATION_FAILED","-714":"CERT_DATABASE_CHANGED","-800":"DNS_MALFORMED_RESPONSE","-801":"DNS_SERVER_REQUIRES_TCP","-802":"DNS_SERVER_FAILED","-803":"DNS_TIMED_OUT","-804":"DNS_CACHE_MISS","-805":"DNS_SEARCH_EMPTY","-806":"DNS_SORT_ERROR"}};a.prototype.getErrorMessage=function(a){return this.errorCodeMap[String(a)]},MySQL.NetworkErrorCode=a}(),function(){"use strict";var a=function(){};a.prototype.sha1ToWordArray=function(a){return CryptoJS.SHA1(a)},a.prototype.sha1ToUint8Array=function(a){var b=this.sha1ToWordArray(a);return this.wordArrayToUnit8Array(b)},a.prototype.sha1Uint8ArrayToUint8Array=function(a){var b=this.uint8ArrayToWords(a),c=CryptoJS.lib.WordArray.create(b,a.length);return this.sha1ToUint8Array(c)},a.prototype.uint8ArrayToWords=function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=a[d]<<24-d%4*8;return c},a.prototype.wordArrayToUnit8Array=function(a){for(var b=new ArrayBuffer(a.sigBytes),c=new DataView(b,0,b.byteLength),d=0;d<a.words.length;d++)c.setInt32(4*d,a.words[d],!1);return new Uint8Array(b)},MySQL.Hasher=a}(),function(){"use strict";var a=function(){this.encoding="utf-8"};a.prototype.arrayBufferToString=function(a){var b=new Uint8Array(a),c=new TextDecoder(this.encoding).decode(b);return c},a.prototype.stringToArrayBuffer=function(a){for(var b=new TextEncoder(this.encoding).encode(a),c=new ArrayBuffer(b.length),d=new DataView(c),e=0;e<b.length;e++)d.setInt8(e,b[e]);return c},a.prototype.createUint8Array=function(a){var b=new ArrayBuffer(a);return new Uint8Array(b)},MySQL.BinaryUtils=a}(),function(){"use strict";var a=function(){this.binaryUtils=new MySQL.BinaryUtils};a.prototype.createFixedLengthInteger=function(a,b){var c=new ArrayBuffer(4),d=new DataView(c);d.setUint32(0,a,!0);var e=new Uint8Array(c),f=e.subarray(0,b);return f},a.prototype.createLengthEncodedString=function(a){var b=this.binaryUtils.stringToArrayBuffer(a),c=new Uint8Array(b),d=c.length,e=this.createLengthEncodedInteger(d),f=new Uint8Array(e.length+c.length);return f.set(e,0),f.set(c,e.length),f},a.prototype.createNullEndValue=function(a){var b=new Uint8Array(a),c=new Uint8Array(b.length+1);return c.set(b,0),c},a.prototype.createLengthEncodedInteger=function(a){var b=null,c=0;if(null===a)return b=new Uint8Array(1),b[0]=251,b;if(a>=0&&250>=a)return b=new Uint8Array(1),b[0]=a,b;var d=new ArrayBuffer(4),e=new DataView(d);e.setUint32(0,a,!1);var f=new Uint8Array(d),g=4;for(c=0;c<f.length;c++)if(0!==f[c]){g-=c;break}if(a>=251&&2==g){for(b=new Uint8Array(3),b[0]=252,c=0;g>c;c++)b[c+1]=f[f.length-1-c];return b}if(3==g){for(b=new Uint8Array(4),b[0]=253,c=0;g>c;c++)b[c+1]=f[f.length-1-c];return b}for(b=new Uint8Array(9),b[0]=254,c=0;g>c;c++)b[c+1]=f[f.length-1-c];return b},a.prototype.createNullEndString=function(a){var b=this.binaryUtils.stringToArrayBuffer(a);return this.createNullEndValue(b)},a.prototype.getNullEndString=function(a,b){for(var c=new Uint8Array(a),d=b;d<c.length&&0!==c[d];d++);var e=new Uint8Array(c.subarray(b,d)),f=this.binaryUtils.arrayBufferToString(e.buffer);return{result:f,nextPosition:d+1}},a.prototype.getFixedLengthString=function(a,b,c){var d=new Uint8Array(a),e=new Uint8Array(d.subarray(b,b+c)),f=this.binaryUtils.arrayBufferToString(e.buffer);return f},a.prototype.getLengthEncodedString=function(a,b){var c=this.getLengthEncodedInteger(a,b);if(null===c.result)return{result:null,nextPosition:c.nextPosition};var d=this.getFixedLengthString(a,c.nextPosition,c.result);return{result:d,nextPosition:c.nextPosition+c.result}},a.prototype.getFixedLengthInteger=function(a,b,c){var d=new Uint8Array(a),e=d.subarray(b,b+c),f=new Uint8Array(4);f.set(e,0);var g=new DataView(f.buffer,0,4),h=g.getUint32(0,!0);return h},a.prototype.getLengthEncodedInteger=function(a,b){var c=new Uint8Array(a),d=c[b];if(251==d)return{result:null,nextPosition:b+1};if(250>=d)return{result:d,nextPosition:b+1};var e=0;e=252==d?2:253==d?3:8;for(var f=c.subarray(b+1,b+1+e),g=new ArrayBuffer(8),h=new Uint8Array(g),i=0;i<f.length;i++)h[i]=f[i];var j=new DataView(g),k=j.getInt32(0,!0);return{result:k,nextPosition:b+1+e}},MySQL.Types=a}(MySQL.BinaryUtils),function(a){"use strict";var b=function(b,c){this.mySQLTypes=new a,this.sequenceNumber=b,this.data=c,this.dataLength=c.byteLength};b.prototype.getArrayBuffer=function(){var a=new ArrayBuffer(4+this.dataLength),b=this.mySQLTypes.createFixedLengthInteger(this.dataLength,3),c=new Uint8Array(a);return c.set(b,0),c[3]=this.sequenceNumber,c.set(new Uint8Array(this.data),4),a},MySQL.Packet=b}(MySQL.Types),function(){"use strict";var a=function(a,b,c,d,e,f,g,h,i,j,k){this.protocolVersion=a,this.serverVersion=b,this.connectionId=c,this.authPluginDataPart1=d,this.capabilityFlag1=e,this.characterSet=f,this.statusFlags=g,this.capabilityFlag2=h,this.authPluginDataLen=i,this.authPluginDataPart2=j,this.authPluginName=k};MySQL.InitialHandshakeRequest=a}(),function(){"use strict";var a={SERVER_STATUS_IN_TRANS:1,SERVER_STATUS_AUTOCOMMIT:2,SERVER_MORE_RESULTS_EXISTS:8,SERVER_STATUS_NO_GOOD_INDEX_USED:16,SERVER_STATUS_NO_INDEX_USED:32,SERVER_STATUS_CURSOR_EXISTS:64,SERVER_STATUS_LAST_ROW_SENT:128,SERVER_STATUS_DB_DROPPED:256,SERVER_STATUS_NO_BACKSLASH_ESCAPES:512,SERVER_STATUS_METADATA_CHANGED:1024,SERVER_QUERY_WAS_SLOW:2048,SERVER_PS_OUT_PARAMS:4096};MySQL.StatusFlags=a}(),function(a){"use strict";var b=function(a,b,c,d,e){this.affectedRows=a,this.lastInsertId=b,this.statusFlags=c,this.warnings=d,this.info=e};b.prototype.isSuccess=function(){return!0},b.prototype.hasResultset=function(){return!1},b.prototype.isStatusInTrans=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_IN_TRANS)},b.prototype.isAutoCommit=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_AUTOCOMMIT)},b.prototype.isMoreResultsExists=function(){return 0!==(this.statusFlags&a.SERVER_MORE_RESULTS_EXISTS)},b.prototype.isNoGoodIndexUsed=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_NO_GOOD_INDEX_USED)},b.prototype.isNoIndexUsed=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_NO_INDEX_USED)},b.prototype.isCursorExists=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_CURSOR_EXISTS)},b.prototype.isLastRowSent=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_LAST_ROW_SENT)},b.prototype.isDbDropped=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_DB_DROPPED)},b.prototype.isNoBackslashEscapes=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_NO_BACKSLASH_ESCAPES)},b.prototype.isMetadataChanged=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_METADATA_CHANGED)},b.prototype.isQueryWasSlow=function(){return 0!==(this.statusFlags&a.SERVER_QUERY_WAS_SLOW)},b.prototype.isPsOutParams=function(){return 0!==(this.statusFlags&a.SERVER_PS_OUT_PARAMS)},MySQL.OkResult=b}(MySQL.StatusFlags),function(){"use strict";var a=function(a,b,c,d){this.errorCode=a,this.sqlStateMarker=b,this.sqlState=c,this.errorMessage=d};a.prototype.isSuccess=function(){return!1},MySQL.ErrResult=a}(),function(){"use strict";var a=function(a){this.columnCount=a};a.prototype.isSuccess=function(){return!0},a.prototype.hasResultset=function(){return!0},MySQL.QueryResult=a}(),function(){"use strict";var a={NOT_NULL:1,PRIMARY_KEY:2,UNIQUE:4,INDEX:8,BLOB:16,UNSIGNED:32,ZEROFILL:64,BINARY:128,AUTO_INCREMENT:512,ENUM:256,SET:2048,NO_DEFAULT_VALUE:4096};MySQL.FieldFlags=a}(),function(a){"use strict";var b=function(a,b,c,d,e,f,g,h,i,j,k,l){this.catalog=a,this.schema=b,this.table=c,this.orgTable=d,this.name=e,this.orgName=f,this.nextLength=g,this.characterSet=h,this.columnLength=i,this.columnType=j,this.flags=k,this.decimals=l};b.prototype.isNotNull=function(){return 0!==(this.flags&a.NOT_NULL)},b.prototype.isPrimaryKey=function(){return 0!==(this.flags&a.PRIMARY_KEY)},b.prototype.isUnique=function(){return 0!==(this.flags&a.UNIQUE)},b.prototype.isIndex=function(){return 0!==(this.flags&a.INDEX)},b.prototype.isBlob=function(){return 0!==(this.flags&a.BLOB)},b.prototype.isUnsigned=function(){return 0!==(this.flags&a.UNSIGNED)},b.prototype.isZeroFill=function(){return 0!==(this.flags&a.ZEROFILL)},b.prototype.isBinary=function(){return 0!==(this.flags&a.BINARY)},b.prototype.isAutoIncrement=function(){return 0!==(this.flags&a.AUTO_INCREMENT)},b.prototype.isEnum=function(){return 0!==(this.flags&a.ENUM)},b.prototype.isSet=function(){return 0!==(this.flags&a.SET)},b.prototype.isNoDefaultValue=function(){return 0!==(this.flags&a.NO_DEFAULT_VALUE)},MySQL.ColumnDefinition=b}(MySQL.FieldFlags),function(){"use strict";var a=function(a){this.values=a};MySQL.ResultsetRow=a}(),function(a){"use strict";var b=function(a,b){this.warningCount=a,this.statusFlags=b};b.prototype.isStatusInTrans=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_IN_TRANS)},b.prototype.isAutoCommit=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_AUTOCOMMIT)},b.prototype.isMoreResultsExists=function(){return 0!==(this.statusFlags&a.SERVER_MORE_RESULTS_EXISTS)},b.prototype.isNoGoodIndexUsed=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_NO_GOOD_INDEX_USED)},b.prototype.isNoIndexUsed=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_NO_INDEX_USED)},b.prototype.isCursorExists=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_CURSOR_EXISTS)},b.prototype.isLastRowSent=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_LAST_ROW_SENT)},b.prototype.isDbDropped=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_DB_DROPPED)},b.prototype.isNoBackslashEscapes=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_NO_BACKSLASH_ESCAPES)},b.prototype.isMetadataChanged=function(){return 0!==(this.statusFlags&a.SERVER_STATUS_METADATA_CHANGED)},b.prototype.isQueryWasSlow=function(){return 0!==(this.statusFlags&a.SERVER_QUERY_WAS_SLOW)},b.prototype.isPsOutParams=function(){return 0!==(this.statusFlags&a.SERVER_PS_OUT_PARAMS)},MySQL.EofResult=b}(MySQL.StatusFlags),function(){"use strict";var a={DECIMAL:0,TINY:1,SHORT:2,LONG:3,FLOAT:4,DOUBLE:5,NULL:6,TIMESTAMP:7,LONGLONG:8,INT24:9,DATE:10,TIME:11,DATETIME:12,YEAR:13,VARCHAR:15,BIT:16,NEWDECIMAL:246,ENUM:247,SET:248,TINY_BLOB:249,MEDIUM_BLOB:250,LONG_BLOB:251,BLOB:252,VAR_STRING:253,STRING:254,GEOMETRY:255};MySQL.ColumnTypes=a}(),function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=function(){this.binaryUtils=new a,this.mySQLTypes=new b,this.hasher=new c},l=function(a,b,c){var d=this.mySQLTypes.getLengthEncodedInteger(a,b),f=d.result,g=this.mySQLTypes.getLengthEncodedInteger(a,d.nextPosition),h=g.result,i=this.mySQLTypes.getFixedLengthInteger(a,g.nextPosition,2),j=this.mySQLTypes.getFixedLengthInteger(a,g.nextPosition+2,2),k="";if(c>g.nextPosition+4){var l=c-g.nextPosition+4;k=this.mySQLTypes.getFixedLengthString(a,g.nextPosition+4,l)}return new e(f,h,i,j,k)},m=function(a,b,c){var d=this.mySQLTypes.getFixedLengthInteger(a,b,2),e=this.mySQLTypes.getFixedLengthString(a,b+2,1),g=this.mySQLTypes.getFixedLengthString(a,b+3,5),h=c-b-8,i=this.mySQLTypes.getFixedLengthString(a,b+8,h);return new f(d,e,g,i)};k.prototype.generateStatisticsRequest=function(){var a=new ArrayBuffer(1),b=new Uint8Array(a);return b[0]=9,b},k.prototype.generateQueryRequest=function(a){var b=this.binaryUtils.stringToArrayBuffer(a),c=new Uint8Array(b),d=this.binaryUtils.createUint8Array(1+c.length);return d[0]=3,d.set(c,1),d},k.prototype.generateInitDBRequest=function(a){var b=this.binaryUtils.stringToArrayBuffer(a),c=new Uint8Array(b),d=this.binaryUtils.createUint8Array(1+c.length);return d[0]=2,d.set(c,1),d},k.prototype.generateSSLRequest=function(a,b){var c=559617;b&&(c|=65536,c|=131072);var d=this.mySQLTypes.createFixedLengthInteger(c,4),e=this.mySQLTypes.createFixedLengthInteger(16777215,4),f=this.mySQLTypes.createLengthEncodedInteger(33),g=d.length+e.length+f.length+23,h=new ArrayBuffer(g),i=new Uint8Array(h),j=0;return i.set(d,j),j+=d.length,i.set(e,j),j+=e.length,i.set(f,j),i},k.prototype.generateHandshakeResponse=function(a,b,c,d){var e=557569;d&&(e|=65536,e|=131072);var f,g=this.mySQLTypes.createFixedLengthInteger(e,4),h=this.mySQLTypes.createFixedLengthInteger(16777215,4),i=this.mySQLTypes.createLengthEncodedInteger(33),j=this.mySQLTypes.createNullEndString(b);f=null===c?0:this.mySQLTypes.createLengthEncodedInteger(c.length);var k=this.mySQLTypes.createNullEndString(a.authPluginName),l=g.length+h.length+i.length+23+j.length+k.length;l+=null===c?1:f.length+c.length;var m=new ArrayBuffer(l),n=new Uint8Array(m),o=0;return n.set(g,o),o+=g.length,n.set(h,o),o+=h.length,n.set(i,o),o+=i.length,o+=23,n.set(j,o),o+=j.length,null===c?(n.set([0],o),o+=1):(n.set(f,o),o+=f.length,n.set(c,o),o+=c.length),n.set(k,o),n},k.prototype.generatePasswordHash=function(a,b){var c=this.hasher.sha1ToUint8Array(b),d=this.hasher.sha1Uint8ArrayToUint8Array(c),e=a.authPluginDataPart1,f=a.authPluginDataPart2,g=new ArrayBuffer(e.length+f.length+d.length),h=new Uint8Array(g);h.set(e,0),h.set(f,e.length),h.set(d,e.length+f.length);for(var i=this.hasher.sha1Uint8ArrayToUint8Array(h),j=new Uint8Array(c.length),k=0;k<j.length;k++)j[k]=c[k]^i[k];return j},k.prototype.generatePingRequest=function(){var a=this.binaryUtils.createUint8Array(1);return a[0]=14,a},k.prototype.parseQueryResultPacket=function(a,b){var c=a.data,e=this.mySQLTypes.getFixedLengthInteger(c,0,1);if(0===e){var f=l.call(this,c,1,a.dataLength);b(f)}else if(255==e){var g=m.call(this,c,1,a.dataLength);b(g)}else{var h=this.mySQLTypes.getLengthEncodedInteger(c,0),i=new d(h.result);b(i)}},k.prototype.parseOkErrResultPacket=function(a){var b=a.data,c=this.mySQLTypes.getFixedLengthInteger(b,0,1);return 0===c?l.call(this,b,1,a.dataLength):255==c?m.call(this,b,1,a.dataLength):null},k.prototype.parseEofPacket=function(a){var b=a.data,c=this.mySQLTypes.getFixedLengthInteger(b,0,1);if(254==c){var d=this.mySQLTypes.getFixedLengthInteger(b,1,2),e=this.mySQLTypes.getFixedLengthInteger(b,3,2);return new g(d,e)}return null},k.prototype.parseInitialHandshakePacket=function(a){var b=a.data,c=0,d=this.mySQLTypes.getFixedLengthInteger(b,c++,1),e=this.mySQLTypes.getNullEndString(b,c),f=e.result;c=e.nextPosition;var g=this.mySQLTypes.getFixedLengthInteger(b,c,4);c+=4;var i=new Uint8Array(b,c,8);c+=9;var j=this.mySQLTypes.getFixedLengthInteger(b,c,2);c+=2;var k=this.mySQLTypes.getFixedLengthInteger(b,c++,1),l=this.mySQLTypes.getFixedLengthInteger(b,c,2);c+=2;var m=this.mySQLTypes.getFixedLengthInteger(b,c,2);c+=2;var n=this.mySQLTypes.getFixedLengthInteger(b,c++,1);c+=10;var o=new Uint8Array(b,c,12);c+=13;var p=this.mySQLTypes.getNullEndString(b,c),q=p.result;return new h(d,f,g,i,j,k,l,m,n,o,q)},k.prototype.parseColumnDefinitionPacket=function(a){var b=a.data,c=this.mySQLTypes.getLengthEncodedString(b,0),d=this.mySQLTypes.getLengthEncodedString(b,c.nextPosition),e=this.mySQLTypes.getLengthEncodedString(b,d.nextPosition),f=this.mySQLTypes.getLengthEncodedString(b,e.nextPosition),g=this.mySQLTypes.getLengthEncodedString(b,f.nextPosition),h=this.mySQLTypes.getLengthEncodedString(b,g.nextPosition),j=this.mySQLTypes.getLengthEncodedInteger(b,h.nextPosition),k=j.nextPosition,l=this.mySQLTypes.getFixedLengthInteger(b,k,2);k+=2;var m=this.mySQLTypes.getFixedLengthInteger(b,k,4);k+=4;var n=this.mySQLTypes.getFixedLengthInteger(b,k,1);k+=1;var o=this.mySQLTypes.getFixedLengthInteger(b,k,2);k+=2;var p=this.mySQLTypes.getFixedLengthInteger(b,k,1);return new i(c.result,d.result,e.result,f.result,g.result,h.result,j.result,l,m,n,o,p)},k.prototype.parseResultsetRowPacket=function(a){for(var b=a.data,c=0,d=[];c<a.dataLength;){var e=this.mySQLTypes.getLengthEncodedString(b,c);d.push(e.result),c=e.nextPosition}return new j(d)},k.prototype.parseStatisticsResultPacket=function(a){var b=a.data,c=a.dataLength,d=this.mySQLTypes.getFixedLengthString(b,0,c);return d},MySQL.Protocol=k}(MySQL.BinaryUtils,MySQL.Types,MySQL.Hasher,MySQL.QueryResult,MySQL.OkResult,MySQL.ErrResult,MySQL.EofResult,MySQL.InitialHandshakeRequest,MySQL.ColumnDefinition,MySQL.ResultsetRow),function(a,b){"use strict";var c=function(){this.mySQLTypes=new b,this.nextSequenceNumber=0,this.socketImpl=null},d=function(a,b,c,e,f){this.readPacket(function(g){c.push(g),a+=1,b>a?d.call(this,a,b,c,e,f):e(c)}.bind(this),f)},e=function(a,b,c){f.call(this,a,function(c){var d=this.mySQLTypes.getFixedLengthInteger(c.data,0,a);b(d)}.bind(this),c)},f=function(a,b,c){this.socketImpl.read(a,b,c)};c.prototype.setSocketImpl=function(a){this.socketImpl=a},c.prototype.connect=function(a,b,c){this.socketImpl.connect(a,b,c)},c.prototype.disconnect=function(a){this.socketImpl.disconnect(a)},c.prototype.isConnected=function(){return this.socketImpl.isConnected()},c.prototype.readPacket=function(b,c){e.call(this,3,function(d){e.call(this,1,function(e){this.incrementSequenceNumber(e),f.call(this,d,function(c){var d=new a(e,c.data);b(d)}.bind(this),c)}.bind(this),c)}.bind(this),c)},c.prototype.readPluralPackets=function(a,b,c){d.call(this,0,a,[],b,c)},c.prototype.writePacket=function(a,b,c){this.socketImpl.write(a,b,c)},c.prototype.incrementSequenceNumber=function(a){this.nextSequenceNumber=a+1,this.nextSequenceNumber>255&&(this.nextSequenceNumber=0)},c.prototype.createPacket=function(b){return new a(this.nextSequenceNumber,b)},c.prototype.resetSequenceNumber=function(){this.nextSequenceNumber=0},c.prototype.establishTls=function(a,b,c,d){this.socketImpl.establishTls(a,b,c,d)},MySQL.Communication=c}(MySQL.Packet,MySQL.Types),function(a,b,c){"use strict";var d=function(){this.mySQLCommunication=new a,this.mySQLProtocol=new b,this.networkErrorCode=new c},e=function(a,b,c,d,e){this.mySQLCommunication.readPacket(function(g){var h=this.mySQLProtocol.parseInitialHandshakePacket(g);f.call(this,h,a,b,c,d,e)}.bind(this),e)},f=function(a,b,c,d,e,f){var g;g=c?this.mySQLProtocol.generatePasswordHash(a,c):null;var h=this.mySQLProtocol.generateHandshakeResponse(a,b,g,d),i=this.mySQLCommunication.createPacket(h.buffer);this.mySQLCommunication.writePacket(i,function(){this.mySQLCommunication.readPacket(function(b){var c=this.mySQLProtocol.parseOkErrResultPacket(b);e(a,c)}.bind(this),f)}.bind(this),f)},g=function(a,b,c,d,e,g,h){this.mySQLCommunication.readPacket(function(i){var j=this.mySQLProtocol.parseInitialHandshakePacket(i),k=this.mySQLProtocol.generateSSLRequest(j,e),l=this.mySQLCommunication.createPacket(k.buffer);this.mySQLCommunication.writePacket(l,function(){this.mySQLCommunication.establishTls(a,b,function(){this.mySQLCommunication.incrementSequenceNumber(l.sequenceNumber),f.call(this,j,c,d,e,g,h)}.bind(this),h)}.bind(this),h)}.bind(this),h)},h=function(a,b,c,d){this.mySQLCommunication.readPacket(function(e){var f=this.mySQLProtocol.parseEofPacket(e),g=this.mySQLProtocol.parseOkErrResultPacket(e);if(f)b(a,f);else if(g&&!g.isSuccess())c(g);else{var i=this.mySQLProtocol.parseResultsetRowPacket(e);a.push(i),h.call(this,a,b,c,d)}}.bind(this),d)},i=function(a,b,c,d,e){this.mySQLCommunication.readPluralPackets(a,function(a){for(var c=[],f=0;f<a.length;f++)c.push(this.mySQLProtocol.parseColumnDefinitionPacket(a[f]));this.mySQLCommunication.readPacket(function(a){this.mySQLProtocol.parseEofPacket(a),h.call(this,[],function(a,d){b(c,a,d)}.bind(this),d,e)}.bind(this),e)}.bind(this),e)},j=function(a,b,c,d){this.mySQLCommunication.readPacket(function(e){this.mySQLProtocol.parseQueryResultPacket(e,function(e){if(e.isSuccess()&&e.hasResultset()){var f=e.columnCount;i.call(this,f,a,b,c,d)}else e.isSuccess()&&!e.hasResultset()?b(e):c(e)}.bind(this))}.bind(this),d)},k=function(a,b,c,d,e){var f=this.mySQLProtocol.generateQueryRequest(a),g=this.mySQLCommunication.createPacket(f.buffer);this.mySQLCommunication.writePacket(g,function(){j.call(this,b,c,d,e)}.bind(this),e)};d.prototype.setSocketImpl=function(a){this.mySQLCommunication.setSocketImpl(a)},d.prototype.login=function(a,b,c,d,f,g,h,i){this.mySQLCommunication.connect(a,b,function(a){a>=0?e.call(this,c,d,f,g,i):h(a+"("+this.networkErrorCode.getErrorMessage(a)+")")}.bind(this))},d.prototype.loginWithSSL=function(a,b,c,d,e,f,h,i,j,k){this.mySQLCommunication.connect(a,b,function(a){a>=0?g.call(this,f,h,c,d,e,i,k):j(a+"("+this.networkErrorCode.getErrorMessage(a)+")")}.bind(this))},d.prototype.logout=function(a){this.mySQLCommunication.disconnect(a)},d.prototype.query=function(a,b,c,d,e){return this.mySQLCommunication.isConnected()?(this.mySQLCommunication.resetSequenceNumber(),void k.call(this,a,b,c,d,e)):void e("Not connected.")},d.prototype.getNextQueryResult=function(a,b,c,d){return this.mySQLCommunication.isConnected()?void j.call(this,a,b,c,d):void d("Not connected.")},d.prototype.getDatabases=function(a,b,c){return this.mySQLCommunication.isConnected()?void this.query("SHOW DATABASES",function(b,c){for(var d=[],e=0;e<c.length;e++)d.push(c[e].values[0]);a(d)}.bind(this),function(){console.log("This callback function never be called.")}.bind(this),function(a){b(a)}.bind(this),c):void c("Not connected.")},d.prototype.initDB=function(a,b,c){if(!this.mySQLCommunication.isConnected())return void c("Not connected.");this.mySQLCommunication.resetSequenceNumber();var d=this.mySQLProtocol.generateInitDBRequest(a),e=this.mySQLCommunication.createPacket(d.buffer);this.mySQLCommunication.writePacket(e,function(){this.mySQLCommunication.readPacket(function(a){var c=this.mySQLProtocol.parseOkErrResultPacket(a);b(c)}.bind(this),c)}.bind(this),c)},d.prototype.getStatistics=function(a,b){if(!this.mySQLCommunication.isConnected())return void b("Not connected.");this.mySQLCommunication.resetSequenceNumber();var c=this.mySQLProtocol.generateStatisticsRequest(),d=this.mySQLCommunication.createPacket(c);this.mySQLCommunication.writePacket(d,function(){this.mySQLCommunication.readPacket(function(b){var c=this.mySQLProtocol.parseStatisticsResultPacket(b);a(c)}.bind(this),b)}.bind(this),b)},d.prototype.ping=function(a,b){if(!this.mySQLCommunication.isConnected())return void b("Not connected.");this.mySQLCommunication.resetSequenceNumber();var c=this.mySQLProtocol.generatePingRequest(),d=this.mySQLCommunication.createPacket(c);this.mySQLCommunication.writePacket(d,function(){this.mySQLCommunication.readPacket(function(b){var c=this.mySQLProtocol.parseOkErrResultPacket(b);a(c)}.bind(this),b)}.bind(this),b)},d.prototype.isConnected=function(){return this.mySQLCommunication.isConnected()},MySQL.Client=d}(MySQL.Communication,MySQL.Protocol,MySQL.NetworkErrorCode),function(){var a=function(){console.log("Deprecated: You should use MySQL.ChromeSocket2."),this.socketId=null};a.prototype.connect=function(a,b,c){var d=null;chrome.socket.create("tcp",{},function(e){d=e.socketId,chrome.socket.connect(d,a,b,function(a){this.socketId=a>=0?d:null,c(a)}.bind(this))}.bind(this))},a.prototype.isConnected=function(){return null!==this.socketId},a.prototype.disconnect=function(a){this.socketId&&(chrome.socket.disconnect(this.socketId),chrome.socket.destroy(this.socketId)),this.socketId=null,a&&a()},a.prototype.write=function(a,b,c){chrome.socket.write(this.socketId,a.getArrayBuffer(),function(a){var d=a.bytesWritten;d>0?b(a):(console.log("Error: writeInfo.bytesWritten="+d),c("Sending packet failed: "+d))}.bind(this))},a.prototype.read=function(a,b,c){chrome.socket.read(this.socketId,a,function(a){var d=a.resultCode;d>0?b(a):(console.log("Error: readInfo.resultCode="+d+" data="+a.data),c("Reading packet failed: "+d))}.bind(this))},MySQL.ChromeSocket=a}(),function(){var a=function(){this.socketId=null,this.initialize(),this.callbacks=[],this.buffer=new ArrayBuffer(0),b.call(this),this.host=null,this.ca=null,this.checkCommonName=!1},b=function(){this.tlsRequiredByteLength=0,this.tlsBuffer="",this.tls={open:!1},this.tlsSendCallback=null,this.tlsSendErrorCallback=null},c=function(a){var b=this.buffer.byteLength+a.byteLength,c=new ArrayBuffer(b),d=new Uint8Array(c,0,b);d.set(new Uint8Array(this.buffer,0,this.buffer.byteLength),0),d.set(new Uint8Array(a,0,a.byteLength),this.buffer.byteLength),this.buffer=c,this.fetch()},d=function(a,b){for(var c=new ArrayBuffer(a.length),d=new Uint8Array(c),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);b(c)},e=function(a,b){for(var c=new Uint8Array(a),d=65536,e="",f=0;f<c.length;f+=d)e+=String.fromCharCode.apply(null,c.subarray(f,Math.min(f+d,c.length)));b(e)},f=function(a){e.call(this,a,function(a){this.tlsBuffer+=a,this.tlsBuffer.length>=this.tlsRequiredByteLength&&(this.tlsRequiredByteLength=this.tls.process(this.tlsBuffer),this.tlsBuffer="")}.bind(this))},g=function(a,b,c){chrome.sockets.tcp.send(this.socketId,a,function(a){var d=a.resultCode;0===d?b(a):(console.log("Error: writeInfo.resultCode="+d),c("Sending data failed: "+d))}.bind(this))};a.prototype.initialize=function(){chrome.sockets.tcp.onReceive.addListener(function(a){this.socketId===a.socketId&&this.onReceive(a)}.bind(this)),chrome.sockets.tcp.onReceiveError.addListener(function(a){this.socketId===a.socketId&&this.onReceiveError(a)}.bind(this))},a.prototype.onReceive=function(a){var b=a.data;this.tls.open?f.call(this,b):c.call(this,b)},a.prototype.onReceiveError=function(a){this.raiseError(a)},a.prototype.raiseError=function(a){if(this.callbacks.length>0){var b=this.callbacks[0];b.fatalCallback("Network error occurred: "+a.resultCode),this.callbacks=this.callbacks.slice(1)}},a.prototype.fetch=function(){if(this.callbacks.length>0){var a,b,c,d,e=this.callbacks[0];if(e.length>0){if(this.buffer.byteLength>=e.length){a=new ArrayBuffer(e.length),b=new Uint8Array(a,0,a.byteLength),c=new Uint8Array(this.buffer,0,this.buffer.byteLength),b.set(c.subarray(0,e.length));var f=new ArrayBuffer(this.buffer.byteLength-e.length),g=new Uint8Array(f,0,f.byteLength);g.set(c.subarray(e.length,c.byteLength),0),this.buffer=f,this.callbacks=this.callbacks.slice(1),d={resultCode:0,data:a},e.callback(d),this.fetch()}}else-1===e.length?(a=new ArrayBuffer(this.buffer.byteLength),b=new Uint8Array(a,0,a.byteLength),c=new Uint8Array(this.buffer,0,this.buffer.byteLength),b.set(c.subarray(0,this.buffer.byteLength)),this.buffer=new ArrayBuffer(0),this.callbacks=this.callbacks.slice(1),d={resultCode:0,data:a},e.callback(d),this.fetch()):console.log("Invalid data.length: "+e.length)}},a.prototype.connect=function(a,b,c){var d=null;chrome.sockets.tcp.create({bufferSize:16777215},function(e){d=e.socketId,chrome.sockets.tcp.connect(d,a,b,function(b){b>=0?(this.socketId=d,this.host=a):(this.socketId=null,this.host=null),this.ca=null,c(b)}.bind(this))}.bind(this))},a.prototype.isConnected=function(){return null!==this.socketId},a.prototype.disconnect=function(a){this.socketId&&(this.tls.open&&this.tls.close(),chrome.sockets.tcp.disconnect(this.socketId),chrome.sockets.tcp.close(this.socketId)),this.socketId=null,this.host=null,this.ca=null,this.callbacks=[],this.buffer=new ArrayBuffer(0),b.call(this),a&&a()
},a.prototype.write=function(a,b,c){this.tls.open?e.call(this,a.getArrayBuffer(),function(a){this.tlsSendCallback=b,this.tlsSendErrorCallback=c,this.tls.prepare(a)}.bind(this)):g.call(this,a.getArrayBuffer(),b,c)},a.prototype.read=function(a,b,c){this.callbacks.push({length:a,callback:b,fatalCallback:c})},a.prototype.establishTls=function(a,b,c,d){this.ca=a,this.checkCommonName=b,k.call(this,c,d),chrome.sockets.tcp.setPaused(this.socketId,!0,function(){this.tls.handshake(),chrome.sockets.tcp.setPaused(this.socketId,!1)}.bind(this))};var h=function(a,b,c,d){if(!d||!d[0])return!1;if(!i.call(this,d[0],this.host))return!1;if(!this.ca)return!0;var e=forge.pki.certificateFromPem(this.ca);if(!i.call(this,e,this.host))return!1;if(e.verify(d[0]))return!0;var f=forge.pki.getPublicKeyFingerprint(e.publicKey,{encoding:"hex"}),g=forge.pki.getPublicKeyFingerprint(d[0].publicKey,{encoding:"hex"});return f===g?!0:!1},i=function(a,b){var c=a.subject.getField("CN");if(c&&c.value&&j.call(this,c,b))return!0;var d=a.getExtension({name:"subjectAltName"});if(!d||!d.altNames)return!1;for(var e=d.altNames,f=e.length-1;f>=0;f--)if(e[f]&&e[f].value&&j.call(this,e[f],b))return!0;return!1},j=function(a,b){if(this.checkCommonName){var c=new RegExp(a.value.replace(/\./g,"\\.").replace(/\*/g,".*"),"i");return c.test(b)}return!0},k=function(a,b){this.tls=forge.tls.createConnection({server:!1,sessionId:null,caStore:[],sessionCache:null,cipherSuites:[forge.tls.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA,forge.tls.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA],virtualHost:null,verify:function(a,b,c,d){return h.call(this,a,b,c,d)}.bind(this),getCertificate:null,getPrivateKey:null,getSignature:null,deflate:null,inflate:null,connected:function(){a()},tlsDataReady:function(a){var b=a.tlsData.getBytes();b.length>0&&d.call(this,b,function(a){g.call(this,a,function(a){var b=this.tlsSendCallback;this.tlsSendCallback=null,b&&b(a)}.bind(this),function(a){var b=this.tlsSendErrorCallback;this.tlsSendErrorCallback=null,b&&b(a)}.bind(this))}.bind(this))}.bind(this),dataReady:function(a){d.call(this,a.data.getBytes(),function(a){c.call(this,a)}.bind(this))}.bind(this),closed:function(){}.bind(this),error:function(a,c){console.log(c),b(c.message)}.bind(this)})};MySQL.ChromeSocket2=a}(),function(){"use strict";var a=function(a){this.message=a};a.prototype=new Error,a.prototype.name="ParseError",MySQL.ParseError=a}(),function(a){var b=!1,c="delimiter ",d=function(){this.result=[],this.stateMap={query:this.query.bind(this),lineStart:this.lineStart.bind(this),escapedQuery:this.escapedQuery.bind(this),sharpComment:this.sharpComment.bind(this),maybeDashComment:this.maybeDashComment.bind(this),dashComment:this.dashComment.bind(this),maybeInlineCommentStart:this.maybeInlineCommentStart.bind(this),inlineComment:this.inlineComment.bind(this),maybeInlineCommentEnd:this.maybeInlineCommentEnd.bind(this),maybeDelimiterDef:this.maybeDelimiterDef.bind(this),delimiterDef:this.delimiterDef.bind(this),delimiterDefEnd:this.delimiterDefEnd.bind(this),maybeDelimiter:this.maybeDelimiter.bind(this),singleStringLeteral:this.singleStringLeteral.bind(this),escapedSingleStringLeteral:this.escapedSingleStringLeteral.bind(this),maybeSingleStringLeteralEnd:this.maybeSingleStringLeteralEnd.bind(this),doubleStringLeteral:this.doubleStringLeteral.bind(this),escapedDoubleStringLeteral:this.escapedDoubleStringLeteral.bind(this),maybeDoubleStringLeteralEnd:this.maybeDoubleStringLeteralEnd.bind(this)},this.currentState=this.stateMap.lineStart,this.buffer=[],this.maybeDashCommentCount=0,this.maybeDelimiterDefBuffer=[],this.maybeDelimiterDefCount=0,this.delimiterDefCandidate=[],this.delimiter=";",this.maybeDelimiterCount=0,this.skipDelimiterCheck=!1},e=function(){var a=this.buffer.join(""),b=f.call(this,a);b&&this.result.push(a),this.buffer=[]},f=function(a){return a.replace(/^[ 　\t\r\n]+|[ 　\t\r\n]+$/g,"")};d.prototype.parse=function(b){try{return this.evaluate(b),e.call(this),this.result[this.result.length-1]+=this.maybeDelimiterDefBuffer.join(""),{success:!0,result:this.result}}catch(c){if(c instanceof a)return{success:!1,error:c};throw c}},d.prototype.evaluate=function(a){for(var b=0;b<a.length;){var c=a.charAt(b),d=this.currentState(a,c,b);b+=d}},d.prototype.lineStart=function(a,c){return b&&console.log("lineStart: "+c)," "===c?(this.buffer.push(c),1):"d"===c||"D"===c?(this.currentState=this.stateMap.maybeDelimiterDef,this.maybeDelimiterDefBuffer=[c],this.maybeDelimiterDefCount=0,1):(this.currentState=this.stateMap.query,0)},d.prototype.query=function(a,c){b&&console.log("query: "+c+" [delimiter="+this.delimiter+"]");var d=this.skipDelimiterCheck;return this.skipDelimiterCheck=!1,"\\"===c?(this.buffer.push(c),this.currentState=this.stateMap.escapedQuery,1):d||c!==this.delimiter.charAt(0)||1!==this.delimiter.length?d||c!==this.delimiter.charAt(0)?"#"===c?(this.buffer.push(c),this.currentState=this.stateMap.sharpComment,1):"-"===c?(this.buffer.push(c),this.currentState=this.stateMap.maybeDashComment,this.maybeDashCommentCount=0,1):"/"===c?(this.buffer.push(c),this.currentState=this.stateMap.maybeInlineCommentStart,1):"\n"===c?(this.buffer.push(c),this.currentState=this.stateMap.lineStart,1):"'"===c?(this.buffer.push(c),this.currentState=this.stateMap.singleStringLeteral,1):'"'===c?(this.buffer.push(c),this.currentState=this.stateMap.doubleStringLeteral,1):(this.buffer.push(c),1):(this.currentState=this.stateMap.maybeDelimiter,this.maybeDelimiterCount=0,1):(e.call(this),1)},d.prototype.escapedQuery=function(a,c){return b&&console.log("escapedQuery: "+c),this.buffer.push(c),this.currentState=this.stateMap.query,1},d.prototype.sharpComment=function(a,c){return b&&console.log("sharpComment: "+c),"\n"===c?(this.buffer.push(c),this.currentState=this.stateMap.lineStart,1):(this.buffer.push(c),1)},d.prototype.maybeDashComment=function(a,c){return b&&console.log("maybeDashComment: "+c),0===this.maybeDashCommentCount&&"-"===c?(this.buffer.push(c),this.maybeDashCommentCount++,1):1===this.maybeDashCommentCount&&" "===c?(this.buffer.push(c),this.currentState=this.stateMap.dashComment,1):1===this.maybeDashCommentCount&&"\n"===c?(this.buffer.push(c),this.currentState=this.stateMap.lineStart,1):(this.buffer.push(c),this.currentState=this.stateMap.query,1)},d.prototype.dashComment=function(a,c){return b&&console.log("dashComment: "+c),"\n"===c?(this.buffer.push(c),this.currentState=this.stateMap.lineStart,1):(this.buffer.push(c),1)},d.prototype.maybeInlineCommentStart=function(a,c){return b&&console.log("maybeInlineCommentStart: "+c),"*"===c?(this.buffer.push(c),this.currentState=this.stateMap.inlineComment,1):(this.buffer.push(c),this.currentState=this.stateMap.query,1)},d.prototype.inlineComment=function(a,c){return b&&console.log("inlineComment: "+c),"*"===c?(this.buffer.push(c),this.currentState=this.stateMap.maybeInlineCommentEnd,1):(this.buffer.push(c),1)},d.prototype.maybeInlineCommentEnd=function(a,c){return b&&console.log("maybeInlineCommentEnd: "+c),"*"===c?(this.buffer.push(c),1):"/"===c?(this.buffer.push(c),this.currentState=this.stateMap.query,1):(this.buffer.push(c),this.currentState=this.stateMap.inlineComment,1)},d.prototype.maybeDelimiterDef=function(a,d){return b&&console.log("maybeDelimiterDef: "+d),this.maybeDelimiterDefCount++,d.toLowerCase()===c.charAt(this.maybeDelimiterDefCount).toLowerCase()?this.maybeDelimiterDefCount+1===c.length?(this.currentState=this.stateMap.delimiterDef,this.delimiterDefCandidate=[],this.maybeDelimiterDefBuffer=[],1):(this.maybeDelimiterDefBuffer.push(d),1):(this.buffer=this.buffer.concat(this.maybeDelimiterDefBuffer),this.buffer.push(d),this.maybeDelimiterDefBuffer=[],this.currentState=this.stateMap.query,1)},d.prototype.delimiterDef=function(c,d,f){if(b&&console.log("delimiterDef: "+d)," "===d)return 0===this.delimiterDefCandidate.length?1:(this.delimiter=this.delimiterDefCandidate.join(""),this.currentState=this.stateMap.delimiterDefEnd,e.call(this),1);if("\n"===d){if(0===this.delimiterDefCandidate.length)throw new a("Delimiter not defined at "+f);return this.delimiter=this.delimiterDefCandidate.join(""),this.currentState=this.stateMap.lineStart,e.call(this),1}return this.delimiterDefCandidate.push(d),1},d.prototype.delimiterDefEnd=function(a,c){return b&&console.log("delimiterEnd: "+c),"\n"===c?(this.currentState=this.stateMap.lineStart,1):1},d.prototype.maybeDelimiter=function(a,c){return b&&console.log("maybeDelimiter: "+c),this.maybeDelimiterCount++,c===this.delimiter.charAt(this.maybeDelimiterCount)?this.maybeDelimiterCount+1===this.delimiter.length?(e.call(this),this.currentState=this.stateMap.query,1):1:(this.currentState=this.stateMap.query,this.skipDelimiterCheck=!0,-1*this.maybeDelimiterCount)},d.prototype.singleStringLeteral=function(a,c){return b&&console.log("singleStringLeteral: "+c),"\\"===c?(this.buffer.push(c),this.currentState=this.stateMap.escapedSingleStringLeteral,1):"'"===c?(this.buffer.push(c),this.currentState=this.stateMap.maybeSingleStringLeteralEnd,1):(this.buffer.push(c),1)},d.prototype.maybeSingleStringLeteralEnd=function(a,c){return b&&console.log("maybeSingleStringLeteralEnd: "+c),"'"===c?(this.buffer.push(c),this.currentState=this.stateMap.singleStringLeteral,1):(this.currentState=this.stateMap.query,0)},d.prototype.escapedSingleStringLeteral=function(a,c){return b&&console.log("escapedSingleStringLeteral: "+c),this.buffer.push(c),this.currentState=this.stateMap.singleStringLeteral,1},d.prototype.doubleStringLeteral=function(a,c){return b&&console.log("doubleStringLeteral: "+c),"\\"===c?(this.buffer.push(c),this.currentState=this.stateMap.escapedDoubleStringLeteral,1):'"'===c?(this.buffer.push(c),this.currentState=this.stateMap.maybeDoubleStringLeteralEnd,1):(this.buffer.push(c),1)},d.prototype.maybeDoubleStringLeteralEnd=function(a,c){return b&&console.log("maybeDoubleStringLeteralEnd: "+c),'"'===c?(this.buffer.push(c),this.currentState=this.stateMap.doubleStringLeteral,1):(this.currentState=this.stateMap.query,0)},d.prototype.escapedDoubleStringLeteral=function(a,c){return b&&console.log("escapedDoubleStringLeteral: "+c),this.buffer.push(c),this.currentState=this.stateMap.doubleStringLeteral,1},d.prototype.setDebug=function(a){b=a},MySQL.QueryDivider=d}(MySQL.ParseError),function(){"use strict";var a=function(){this.typeMap={0:"DECIMAL",1:"TINY",2:"SHORT",3:"LONG",4:"FLOAT",5:"DOUBLE",6:"NULL",7:"TIMESTAMP",8:"LONGLONG",9:"INT24",10:"DATE",11:"TIME",12:"DATETIME",13:"YEAR",14:"NEWDATE",15:"VARCHAR",16:"BIT",17:"TIMESTAMP2",18:"DATETIME2",19:"TIME2",246:"NEWDECIMAL",247:"ENUM",248:"SET",249:"TINY_BLOB",250:"MEDIUM_BLOB",251:"LONG_BLOB",252:"BLOB",253:"VAR_STRING",254:"STRING",255:"GEOMETRY"}};a.prototype.getColumnTypeName=function(a){return this.typeMap[String(a)]},MySQL.columnType=new a}();